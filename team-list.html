<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team List - YISE Scouting</title>

    <link rel="icon" href="yise.png" type="image/png">

    <style>
        /* Custom font-face rule for the Aerospace font */
        @font-face {
            font-family: 'Aerospace';
            src: url('aerospace.woff') format('woff'), /* Adjust the path to your font file */
                 url('aerospace.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        header {
            background-color: #1b1dcc;
            color: white;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .header-content {
            display: flex;
            align-items: center;
            width: 100%;
        }

        header h1 {
            font-family: 'Aerospace', sans-serif;
            font-size: 48px;
            text-align: center;
            flex-grow: 1;
            margin: 0;
        }

        header img {
            height: 160px;
            margin-right: 20px;
        }

        nav {
            background-color: #e0e0e0;
            padding: 10px;
            text-align: center;
        }

        nav a {
            text-decoration: none;
            color: #333;
            padding: 10px 20px;
            margin: 0 10px;
            font-size: 18px;
            transition: background-color 0.3s ease;
        }

        nav a:hover {
            background-color: #b0b0b0;
            color: white;
        }

        nav a.active {
            background-color: #1b1dcc;
            color: white;
            border-radius: 0;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            flex-grow: 1;
        }

        .container h2 {
            font-size: 32px;
            color: #333;
            text-align: left;
            margin-bottom: 20px;
        }

        .container p {
            font-size: 18px;
            color: #555;
            line-height: 1.6;
        }

        footer {
            background-color: #1b1dcc;
            color: white;
            text-align: center;
            padding: 10px 0;
            width: 100%;
        }

        footer small {
            font-size: 12px;
        }

        .input-section {
            margin-top: 30px;
            text-align: center;
            margin-bottom: 50px;
        }

        .input-section input {
            padding: 10px;
            margin: 5px;
            font-size: 16px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .input-section button {
            padding: 10px 20px;
            margin-top: 10px;
            background-color: #1b1dcc;
            color: white;
            font-size: 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .input-section button:hover {
            background-color: #155ab6;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table, th, td {
            border: 1px solid #ccc;
        }

        th, td {
            padding: 12px;
            text-align: center;
        }

        th {
            background-color: #f4f4f4;
            cursor: pointer;
        }

        .edit-btn, .remove-btn {
            padding: 5px 10px;
            background-color: #f0ad4e;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 5px;
        }

        .edit-btn:hover, .remove-btn:hover {
            background-color: #ec971f;
        }

        .remove-btn {
            background-color: #d9534f;
        }

        .remove-btn:hover {
            background-color: #c9302c;
        }
    </style>
</head>
<body>

    <header>
        <div class="header-content">
            <img src="yise.png" alt="YISE Scouting Logo">
            <h1>YISE Scouting</h1>
        </div>
    </header>

    <nav>
        <a href="index.html">About</a>
        <a href="parent-scouting.html">Parent Scouting</a>
        <a href="competition-scouting.html">Competition Scouting</a>
        <a href="pit-scouting.html">Pit Scouting</a>
        <a href="team-list.html" class="active">Team List</a>
        <a href="tournament-schedule.html">Tournament Schedule</a>
        <a href="drive-coach.html">Drive Coach</a>
    </nav>

    <div class="container">
        <h2>Team List</h2>
        <p>
            This page provides a list of all the teams participating at the event.
        </p>

        <table id="teamList">
            <thead>
                <tr>
                    <th onclick="sortTable(0)">Team Name</th>
                    <th onclick="sortTable(1)">Team Number</th>
                    <th onclick="sortTable(2)">Ranking</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Team data will be added here -->
            </tbody>
        </table>
    </div>

    <div class="input-section">
        <h3>Add Team</h3>
        <input type="text" id="teamName" placeholder="Team Name" oninput="checkInput()">
        <input type="number" id="teamNumber" placeholder="Team Number" oninput="checkInput()">
        <input type="number" id="teamRanking" placeholder="Ranking" oninput="checkInput()">
        <button id="submitButton" style="display: none;" onclick="addTeam()">Add Team</button>
    </div>

    <footer>
        <small>Brought to you by FTC YISE #11308 | All Rights Reserved | Â© 2024</small>
    </footer>

    <script>
        let editingIndex = -1;

        // Check if all input fields are filled
        function checkInput() {
            const teamName = document.getElementById('teamName').value;
            const teamNumber = document.getElementById('teamNumber').value;
            const teamRanking = document.getElementById('teamRanking').value;

            if (teamName && teamNumber && teamRanking) {
                document.getElementById('submitButton').style.display = 'inline-block';
            } else {
                document.getElementById('submitButton').style.display = 'none';
            }
        }

        // Add or update a team
        function addTeam() {
            const teamName = document.getElementById('teamName').value;
            const teamNumber = document.getElementById('teamNumber').value;
            const teamRanking = document.getElementById('teamRanking').value;

            const table = document.getElementById('teamList').getElementsByTagName('tbody')[0];

            if (editingIndex > -1) {
                // Edit the existing team
                const row = table.rows[editingIndex];
                row.cells[0].textContent = teamName;
                row.cells[1].textContent = "#" + teamNumber;  // Add "#" before team number
                row.cells[2].textContent = teamRanking;
                row.cells[3].innerHTML = `<button class="edit-btn" onclick="editTeam(${editingIndex})">Edit</button>
                                           <button class="remove-btn" onclick="removeTeam(${editingIndex})">Remove</button>`;

                editingIndex = -1;
            } else {
                // Add a new team
                const newRow = table.insertRow();
                const nameCell = newRow.insertCell(0);
                const numberCell = newRow.insertCell(1);
                const rankingCell = newRow.insertCell(2);
                const actionsCell = newRow.insertCell(3);

                nameCell.textContent = teamName;
                numberCell.textContent = "#" + teamNumber;
                rankingCell.textContent = teamRanking;
                actionsCell.innerHTML = `<button class="edit-btn" onclick="editTeam(${table.rows.length - 1})">Edit</button>
                                         <button class="remove-btn" onclick="removeTeam(${table.rows.length - 1})">Remove</button>`;
            }

            // Save to localStorage
            saveTeamsToLocalStorage();

            // Clear input fields
            document.getElementById('teamName').value = '';
            document.getElementById('teamNumber').value = '';
            document.getElementById('teamRanking').value = '';
            document.getElementById('submitButton').style.display = 'none';
        }

        // Edit a team
        function editTeam(index) {
            const row = document.getElementById('teamList').getElementsByTagName('tbody')[0].rows[index];

            document.getElementById('teamName').value = row.cells[0].textContent;
            document.getElementById('teamNumber').value = row.cells[1].textContent.replace('#', '');
            document.getElementById('teamRanking').value = row.cells[2].textContent;

            editingIndex = index;
            document.getElementById('submitButton').style.display = 'inline-block';
        }

        // Remove a team
        function removeTeam(index) {
            document.getElementById('teamList').getElementsByTagName('tbody')[0].deleteRow(index);
            saveTeamsToLocalStorage();
        }

        // Sort the table
        function sortTable(n) {
            const table = document.getElementById("teamList");
            const rows = Array.from(table.rows).slice(1); // Skip the header row
            const isAscending = table.rows[0].cells[n].getAttribute('data-asc') === 'true';
            
            rows.sort((a, b) => {
                const aText = a.cells[n].textContent;
                const bText = b.cells[n].textContent;
                
                if (n === 1) {
                    // Sort by number (use numeric comparison for team number)
                    return isAscending ? parseInt(aText.slice(1)) - parseInt(bText.slice(1)) : parseInt(bText.slice(1)) - parseInt(aText.slice(1));
                } else if (n === 2) {
                    // Sort by ranking (numeric comparison)
                    return isAscending ? parseInt(aText) - parseInt(bText) : parseInt(bText) - parseInt(aText);
                } else {
                    return isAscending ? aText.localeCompare(bText) : bText.localeCompare(aText);
                }
            });

            // Reorder the rows in the table
            rows.forEach(row => table.appendChild(row));

            // Toggle sorting order
            table.rows[0].cells[n].setAttribute('data-asc', isAscending ? 'false' : 'true');
        }

        // Save teams to localStorage
        function saveTeamsToLocalStorage() {
            const table = document.getElementById('teamList').getElementsByTagName('tbody')[0];
            const teams = Array.from(table.rows).map(row => {
                return {
                    name: row.cells[0].textContent,
                    number: row.cells[1].textContent,
                    ranking: row.cells[2].textContent
                };
            });

            localStorage.setItem('teams', JSON.stringify(teams));
        }

        // Load teams from localStorage
        function loadTeamsFromLocalStorage() {
            const teams = JSON.parse(localStorage.getItem('teams')) || [];
            const table = document.getElementById('teamList').getElementsByTagName('tbody')[0];

            teams.forEach(team => {
                const newRow = table.insertRow();
                const nameCell = newRow.insertCell(0);
                const numberCell = newRow.insertCell(1);
                const rankingCell = newRow.insertCell(2);
                const actionsCell = newRow.insertCell(3);

                nameCell.textContent = team.name;
                numberCell.textContent = team.number;
                rankingCell.textContent = team.ranking;
                actionsCell.innerHTML = `<button class="edit-btn" onclick="editTeam(${table.rows.length - 1})">Edit</button>
                                         <button class="remove-btn" onclick="removeTeam(${table.rows.length - 1})">Remove</button>`;
            });
        }

        // Load teams on page load
        window.onload = loadTeamsFromLocalStorage;
    </script>
</body>
</html>
